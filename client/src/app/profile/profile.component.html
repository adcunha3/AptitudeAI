<div class="edit-profile-container">
  
  <div class="cover-photo">
    <h1>Edit Your Profile</h1>
  </div>

  <div class="profile-header">
    <div class="profile-image-wrapper">
      <img 
        [src]="profileService.image || '/assets/default-profile.png'" 
        alt="Profile Image" 
        class="profile-image"
        onerror="this.src='/assets/default-profile.png'"
      />
    </div>
    <h2 class="username">{{ profileService.username() }}</h2>
    <p class="role">{{ profileService.role() }}</p>
  </div>

  <!-- Profile Form -->
  <form [formGroup]="profileForm" (ngSubmit)="onSaveProfile()" class="profile-form">
    
    <div class="profile-details">
      <p><strong>Email:</strong> {{ profileService.email() }}</p>
    </div>

    <div class="form-group">
      <label for="bio">Bio</label>
      <textarea id="bio" formControlName="bio" placeholder="Tell us about yourself"></textarea>
    </div>

    <div class="form-group">
      <label for="interests">Interests</label>
      <input id="interests" formControlName="interests" type="text" placeholder="Enter your interests" />
    </div>

    <div class="form-group file-upload">
      <label for="profilePicture">Profile Picture</label>
      <input id="profilePicture" type="file" (change)="onFileSelected($event)" />
    </div>

    <div class="profile-image-preview">
      <img [src]="previewUrl" alt="Profile Preview" width="100"/>
    </div>

    <button type="submit" class="save-btn">Save Changes</button>
  </form>

  <hr>

  <!-- Password Change Form -->
  <div class="change-password-container">
    <h2>Change Password</h2>
    <form [formGroup]="passwordForm" (ngSubmit)="onChangePassword()">
      
      <div class="form-group">
        <label for="currentPassword">Current Password</label>
        <input type="password" id="currentPassword" formControlName="currentPassword" required>
      </div>

      <div class="form-group">
        <label for="newPassword">New Password</label>
        <input type="password" id="newPassword" formControlName="newPassword" required>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirm New Password</label>
        <input type="password" id="confirmPassword" formControlName="confirmPassword" required>
        <span *ngIf="passwordForm.hasError('mismatch', 'confirmPassword')" class="error-text">
          Passwords do not match!
        </span>
      </div>

      <button type="submit" class="change-password-btn">Change Password</button>
    </form>
  </div>

</div>
